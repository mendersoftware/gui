{"version":3,"sources":["../src/ReactHeight.js"],"names":["getElementHeight","el","clientHeight","ReactHeight","createClass","propTypes","children","PropTypes","node","isRequired","onHeightReady","func","hidden","bool","dirty","getDefaultProps","getInitialState","height","props","componentDidMount","wrapper","setState","state","componentWillReceiveProps","shouldComponentUpdate","componentDidUpdate","setWrapperRef","render","_onHeightReady","_getElementHeight","_dirty","overflow"],"mappings":"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","file":"ReactHeight.js","sourcesContent":["/* eslint \"react/no-did-mount-set-state\":0 */\n/* eslint \"react/no-did-update-set-state\":0 */\n\n\nimport React from 'react';\nimport {shouldComponentUpdate} from 'react/lib/ReactComponentWithPureRenderMixin';\n\nconst getElementHeight = el => el.clientHeight;\n\nconst ReactHeight = React.createClass({\n  propTypes: {\n    children: React.PropTypes.node.isRequired,\n    onHeightReady: React.PropTypes.func.isRequired,\n    hidden: React.PropTypes.bool,\n    dirty: React.PropTypes.bool,\n    getElementHeight: React.PropTypes.func\n  },\n\n\n  getDefaultProps() {\n    return {\n      hidden: false,\n      dirty: true,\n      getElementHeight\n    };\n  },\n\n\n  getInitialState() {\n    return {\n      height: 0, dirty: this.props.dirty\n    };\n  },\n\n\n  componentDidMount() {\n    const height = this.props.getElementHeight(this.wrapper);\n    const dirty = false;\n\n    this.setState({height, dirty}, () => this.props.onHeightReady(this.state.height));\n  },\n\n\n  componentWillReceiveProps({children, dirty}) {\n    if (children !== this.props.children || dirty) {\n      this.setState({dirty: true});\n    }\n  },\n\n\n  shouldComponentUpdate,\n\n\n  componentDidUpdate() {\n    const height = this.props.getElementHeight(this.wrapper);\n    const dirty = false;\n\n    if (height === this.state.height) {\n      this.setState({dirty});\n    } else {\n      this.setState({height, dirty}, () => this.props.onHeightReady(this.state.height));\n    }\n  },\n\n\n  setWrapperRef(el) {\n    this.wrapper = el;\n  },\n\n\n  render() {\n    const {\n      onHeightReady: _onHeightReady,\n      getElementHeight: _getElementHeight,\n      dirty: _dirty,\n      hidden,\n      children,\n      ...props\n    } = this.props;\n    const {dirty} = this.state;\n\n    if (hidden && !dirty) {\n      return null;\n    }\n\n    if (hidden) {\n      return (\n        <div style={{height: 0, overflow: 'hidden'}}>\n          <div ref={this.setWrapperRef} {...props}>{children}</div>\n        </div>\n      );\n    }\n\n    return <div ref={this.setWrapperRef} {...props}>{children}</div>;\n  }\n});\n\n\nexport default ReactHeight;\n"]}