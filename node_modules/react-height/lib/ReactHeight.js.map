{"version":3,"sources":["../src/ReactHeight.js"],"names":["getElementHeight","el","clientHeight","ReactHeight","propTypes","children","node","isRequired","onHeightReady","func","hidden","bool","dirty","getDefaultProps","getInitialState","height","props","componentDidMount","wrapper","setState","state","componentWillReceiveProps","shouldComponentUpdate","componentDidUpdate","setWrapperRef","render","_onHeightReady","_getElementHeight","_dirty","overflow"],"mappings":"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","file":"ReactHeight.js","sourcesContent":["/* eslint \"react/no-did-mount-set-state\":0 */\n/* eslint \"react/no-did-update-set-state\":0 */\n\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport createReactClass from 'create-react-class';\nimport {shouldComponentUpdate} from 'react/lib/ReactComponentWithPureRenderMixin';\n\nconst getElementHeight = el => el.clientHeight;\n\nconst ReactHeight = createReactClass({\n  propTypes: {\n    children: PropTypes.node.isRequired,\n    onHeightReady: PropTypes.func.isRequired,\n    hidden: PropTypes.bool,\n    dirty: PropTypes.bool,\n    getElementHeight: PropTypes.func\n  },\n\n\n  getDefaultProps() {\n    return {\n      hidden: false,\n      dirty: true,\n      getElementHeight\n    };\n  },\n\n\n  getInitialState() {\n    return {\n      height: 0, dirty: this.props.dirty\n    };\n  },\n\n\n  componentDidMount() {\n    const height = this.props.getElementHeight(this.wrapper);\n    const dirty = false;\n\n    this.setState({height, dirty}, () => this.props.onHeightReady(this.state.height));\n  },\n\n\n  componentWillReceiveProps({children, dirty}) {\n    if (children !== this.props.children || dirty) {\n      this.setState({dirty: true});\n    }\n  },\n\n\n  shouldComponentUpdate,\n\n\n  componentDidUpdate() {\n    const height = this.props.getElementHeight(this.wrapper);\n    const dirty = false;\n\n    if (height === this.state.height) {\n      this.setState({dirty});\n    } else {\n      this.setState({height, dirty}, () => this.props.onHeightReady(this.state.height));\n    }\n  },\n\n\n  setWrapperRef(el) {\n    this.wrapper = el;\n  },\n\n\n  render() {\n    const {\n      onHeightReady: _onHeightReady,\n      getElementHeight: _getElementHeight,\n      dirty: _dirty,\n      hidden,\n      children,\n      ...props\n    } = this.props;\n    const {dirty} = this.state;\n\n    if (hidden && !dirty) {\n      return null;\n    }\n\n    if (hidden) {\n      return (\n        <div style={{height: 0, overflow: 'hidden'}}>\n          <div ref={this.setWrapperRef} {...props}>{children}</div>\n        </div>\n      );\n    }\n\n    return <div ref={this.setWrapperRef} {...props}>{children}</div>;\n  }\n});\n\n\nexport default ReactHeight;\n"]}