{"version":3,"sources":["../src/ReactHeight.js"],"names":[],"mappings":";;;;;;;;AAIA;;;;AACA;;;;;;;AAGA,IAAM,cAAc,gBAAM,WAAN,CAAkB;AAAA;;AACpC,aAAW;AACT,cAAU,gBAAM,SAAN,CAAgB,IAAhB,CAAqB,UADtB;AAET,mBAAe,gBAAM,SAAN,CAAgB,IAAhB,CAAqB,UAF3B;AAGT,YAAQ,gBAAM,SAAN,CAAgB,IAHf;AAIT,WAAO,gBAAM,SAAN,CAAgB;AAJd,GADyB;;AASpC,iBAToC,6BASlB;AAChB,WAAO,EAAC,QAAQ,KAAT,EAAgB,OAAO,IAAvB,EAAP;AACD,GAXmC;AAcpC,iBAdoC,6BAclB;AAChB,WAAO;AACL,cAAQ,CADH,EACM,OAAO,KAAK,KAAL,CAAW;AADxB,KAAP;AAGD,GAlBmC;AAqBpC,mBArBoC,+BAqBhB;AAAA;;AAClB,QAAM,SAAS,KAAK,OAAL,CAAa,YAA5B;AACA,QAAM,QAAQ,KAAd;;AAEA,SAAK,QAAL,CAAc,EAAC,cAAD,EAAS,YAAT,EAAd,EAA+B;AAAA,aAAM,MAAK,KAAL,CAAW,aAAX,CAAyB,MAAK,KAAL,CAAW,MAApC,CAAN;AAAA,KAA/B;AACD,GA1BmC;AA6BpC,2BA7BoC,2CA6BS;AAAA,QAAlB,QAAkB,QAAlB,QAAkB;AAAA,QAAR,KAAQ,QAAR,KAAQ;;AAC3C,QAAI,aAAa,KAAK,KAAL,CAAW,QAAxB,IAAoC,KAAxC,EAA+C;AAC7C,WAAK,QAAL,CAAc,EAAC,OAAO,IAAR,EAAd;AACD;AACF,GAjCmC;;;AAoCpC,iFApCoC;;AAuCpC,oBAvCoC,gCAuCf;AAAA;;AACnB,QAAM,SAAS,KAAK,OAAL,CAAa,YAA5B;AACA,QAAM,QAAQ,KAAd;;AAEA,QAAI,WAAW,KAAK,KAAL,CAAW,MAA1B,EAAkC;AAChC,WAAK,QAAL,CAAc,EAAC,YAAD,EAAd;AACD,KAFD,MAEO;AACL,WAAK,QAAL,CAAc,EAAC,cAAD,EAAS,YAAT,EAAd,EAA+B;AAAA,eAAM,OAAK,KAAL,CAAW,aAAX,CAAyB,OAAK,KAAL,CAAW,MAApC,CAAN;AAAA,OAA/B;AACD;AACF,GAhDmC;AAmDpC,eAnDoC,yBAmDtB,EAnDsB,EAmDlB;AAChB,SAAK,OAAL,GAAe,EAAf;AACD,GArDmC;AAwDpC,QAxDoC,oBAwD3B;AAAA,iBAOH,KAAK,KAPF;AAAA,QAEU,cAFV,UAEL,aAFK;AAAA,QAGE,MAHF,UAGL,KAHK;AAAA,QAIL,MAJK,UAIL,MAJK;AAAA,QAKL,QALK,UAKL,QALK;;AAAA,QAMF,KANE;;AAAA,QAQA,KARA,GAQS,KAAK,KARd,CAQA,KARA;;;AAUP,QAAI,UAAU,CAAC,KAAf,EAAsB;AACpB,aAAO,IAAP;AACD;;AAED,QAAI,MAAJ,EAAY;AACV,aACE;AAAA;AAAA,UAAK,OAAO,EAAC,QAAQ,CAAT,EAAY,UAAU,QAAtB,EAAZ;AACE;AAAA;AAAA,qBAAK,KAAK,KAAK,aAAf,IAAkC,KAAlC;AAA0C;AAA1C;AADF,OADF;AAKD;;AAED,WAAO;AAAA;AAAA,iBAAK,KAAK,KAAK,aAAf,IAAkC,KAAlC;AAA0C;AAA1C,KAAP;AACD;AA/EmC,CAAlB,CAApB;;kBAmFe,W","file":"ReactHeight.js","sourcesContent":["/* eslint \"react/no-did-mount-set-state\":0 */\n/* eslint \"react/no-did-update-set-state\":0 */\n\n\nimport React from 'react';\nimport {shouldComponentUpdate} from 'react/lib/ReactComponentWithPureRenderMixin';\n\n\nconst ReactHeight = React.createClass({\n  propTypes: {\n    children: React.PropTypes.node.isRequired,\n    onHeightReady: React.PropTypes.func.isRequired,\n    hidden: React.PropTypes.bool,\n    dirty: React.PropTypes.bool\n  },\n\n\n  getDefaultProps() {\n    return {hidden: false, dirty: true};\n  },\n\n\n  getInitialState() {\n    return {\n      height: 0, dirty: this.props.dirty\n    };\n  },\n\n\n  componentDidMount() {\n    const height = this.wrapper.clientHeight;\n    const dirty = false;\n\n    this.setState({height, dirty}, () => this.props.onHeightReady(this.state.height));\n  },\n\n\n  componentWillReceiveProps({children, dirty}) {\n    if (children !== this.props.children || dirty) {\n      this.setState({dirty: true});\n    }\n  },\n\n\n  shouldComponentUpdate,\n\n\n  componentDidUpdate() {\n    const height = this.wrapper.clientHeight;\n    const dirty = false;\n\n    if (height === this.state.height) {\n      this.setState({dirty});\n    } else {\n      this.setState({height, dirty}, () => this.props.onHeightReady(this.state.height));\n    }\n  },\n\n\n  setWrapperRef(el) {\n    this.wrapper = el;\n  },\n\n\n  render() {\n    const {\n      onHeightReady: _onHeightReady,\n      dirty: _dirty,\n      hidden,\n      children,\n      ...props\n    } = this.props;\n    const {dirty} = this.state;\n\n    if (hidden && !dirty) {\n      return null;\n    }\n\n    if (hidden) {\n      return (\n        <div style={{height: 0, overflow: 'hidden'}}>\n          <div ref={this.setWrapperRef} {...props}>{children}</div>\n        </div>\n      );\n    }\n\n    return <div ref={this.setWrapperRef} {...props}>{children}</div>;\n  }\n});\n\n\nexport default ReactHeight;\n"]}